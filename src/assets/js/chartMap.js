var allData = {"citys":[   
    {"name":"上海","value":[121.472644,31.231706,44],"symbolSize":3,"itemStyle":{"normal":{"color":"#F58158"}}},
    ],
    "moveLines":[
        {"fromName":"道路1H","toName":"道路1E","coords":[[121.49621, 31.239691], [121.496183, 31.239716], [121.496321, 31.239822], [121.496472, 31.239951], [121.497078, 31.240396], [121.497078, 31.240396], [121.497175, 31.240331], [121.497298, 31.240251], [121.497341, 31.240187], [121.497604, 31.239972], [121.497893, 31.239758], [121.498065, 31.239623], [121.498698, 31.239178], [121.498993, 31.23898], [121.499395, 31.238733], [121.499798, 31.238486], [121.500114, 31.238315], [121.500221, 31.238213], [121.500221, 31.238213], [121.500265, 31.238132]]},
        {"fromName":"道路2H","toName":"道路2E","coords":[[121.411, 31.287], [121.411, 31.288], [121.411, 31.289], [121.412, 31.287], [121.413, 31.287], [121.414, 31.271], [121.414, 31.272], [121.414, 31.273], [121.414, 31.274], [121.414, 31.275], [121.414, 31.276], [121.414, 31.277], [121.414, 31.287], [121.415, 31.277], [121.415, 31.278], [121.415, 31.279], [121.415, 31.28], [121.415, 31.287], [121.416, 31.28], [121.416, 31.281], [121.416, 31.282], [121.416, 31.283], [121.416, 31.284], [121.416, 31.285], [121.416, 31.286], [121.416, 31.287]]},
        {"fromName":"道路3H","toName":"道路3E","coords":[[121.288, 31.277], [121.288, 31.278], [121.289, 31.275], [121.289, 31.276], [121.289, 31.277], [121.29, 31.274], [121.29, 31.275], [121.291, 31.275], [121.292, 31.274], [121.292, 31.275], [121.293, 31.274], [121.294, 31.269], [121.294, 31.27], [121.294, 31.271], [121.294, 31.272], [121.294, 31.273], [121.294, 31.274], [121.295, 31.268], [121.295, 31.269], [121.296, 31.268], [121.297, 31.268], [121.298, 31.268], [121.299, 31.269], [121.3, 31.269], [121.301, 31.269], [121.301, 31.27], [121.302, 31.27]]},
        {"fromName":"道路4H","toName":"道路4E","coords":[[121.495, 31.143], [121.496, 31.142], [121.497, 31.142], [121.498, 31.143], [121.499, 31.143], [121.5, 31.143], [121.5, 31.144], [121.501, 31.144], [121.502, 31.144], [121.503, 31.144], [121.503, 31.145], [121.504, 31.145], [121.505, 31.145], [121.506, 31.146], [121.507, 31.146], [121.508, 31.145], [121.508, 31.146], [121.509, 31.145], [121.51, 31.145], [121.511, 31.145], [121.512, 31.145], [121.512, 31.146], [121.513, 31.146], [121.514, 31.146], [121.515, 31.146], [121.516, 31.146]]},
        {"fromName":"道路5H","toName":"道路5E","coords":[[121.374, 31.247], [121.375, 31.246], [121.376, 31.216], [121.376, 31.217], [121.376, 31.218], [121.376, 31.225], [121.376, 31.246], [121.377, 31.216], [121.377, 31.217], [121.377, 31.218], [121.377, 31.245], [121.378, 31.245], [121.379, 31.243], [121.379, 31.244], [121.38, 31.244]]},
        {"fromName":"道路6H","toName":"道路6E","coords":[[121.5, 31.335], [121.5, 31.336], [121.501, 31.336], [121.502, 31.336], [121.503, 31.336], [121.504, 31.336], [121.505, 31.331], [121.505, 31.332], [121.505, 31.333], [121.505, 31.334], [121.505, 31.335], [121.505, 31.336], [121.506, 31.329], [121.506, 31.33], [121.506, 31.331]]},
        {"fromName":"道路7H","toName":"道路7E","coords":[[121.419, 31.275], [121.42, 31.275], [121.421, 31.274], [121.421, 31.275], [121.422, 31.274], [121.423, 31.271], [121.423, 31.272], [121.423, 31.273], [121.423, 31.274], [121.424, 31.27], [121.424, 31.271], [121.425, 31.27], [121.425, 31.271], [121.426, 31.271], [121.427, 31.27], [121.428, 31.269], [121.428, 31.27], [121.429, 31.268], [121.429, 31.269], [121.43, 31.266], [121.43, 31.267], [121.43, 31.268]]},
        {"fromName":"道路8H","toName":"道路8E","coords":[[121.434, 31.239], [121.435, 31.238], [121.436, 31.237], [121.436, 31.238], [121.437, 31.237], [121.438, 31.236], [121.439, 31.235], [121.44, 31.235], [121.44, 31.236], [121.441, 31.234], [121.441, 31.235], [121.441, 31.236], [121.442, 31.233], [121.442, 31.234], [121.443, 31.232], [121.443, 31.233], [121.444, 31.231], [121.444, 31.232], [121.445, 31.23], [121.445, 31.231], [121.446, 31.229], [121.446, 31.23], [121.447, 31.229], [121.447, 31.23], [121.448, 31.23], [121.449, 31.23]]},
        {"fromName":"道路9H","toName":"道路9E","coords":[[121.387, 31.108], [121.387, 31.109], [121.388, 31.106], [121.388, 31.107], [121.388, 31.108], [121.389, 31.103], [121.389, 31.104], [121.389, 31.105], [121.389, 31.106], [121.39, 31.103], [121.39, 31.104]]}
        ]};

option8 = {
    
    title: {
        text: '',
        left: 'center',
        textStyle: {
            color: '#fff'
        }
    },
    legend: {
        show: false,
        orient: 'vertical',
        top: 'bottom',
        left: 'right',
        data: ['地点', '线路'],
        textStyle: {
            color: '#fff'
        }
    },
    geo: {
        map: 'shanghai',
        label: {
            emphasis: {
                show: true,
                textStyle: {
                    color: '#fff'
                }
            }
        },
        roam: true,
        itemStyle: {
            normal: {
                areaColor: 'rgba(7,21,57,0.5)',
                borderColor: '#0177ff'
            },
            emphasis: {
                areaColor: '#071537'//鼠标指上时的颜色
            }
        }
    },
    series: [{
        name: '地点',
        type: 'effectScatter',
        coordinateSystem: 'geo',
        zlevel: 2,
        rippleEffect: {
            brushType: 'stroke'
        },
        label: {
            emphasis: {
                show: true,
                position: 'right',
                formatter: '{b}'
            }
        },
        symbolSize: 2,
        showEffectOn: 'render',
        itemStyle: {
            normal: {
                color: '#46bee9'
            }
        },
        data: allData.citys
    }, {
        name: '线路',
        type: 'lines',
        coordinateSystem: 'geo',
        polyline: true,
        zlevel: 2,
        large: true,
        effect: {
            show: true,
            constantSpeed: 30,
            symbol: 'pin',
            symbolSize: 3,
            trailLength: 0,
        },
        lineStyle: {
            normal: {
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0, color: '#58B3CC'
                    }, {
                        offset: 1, color: '#F58158'
                    }], false),
                width: 2,
                opacity: 0.5,
                curveness: 0.1
            }
        },
        data: allData.moveLines
    }]
};

var convertData = function (data) {
    var res = [];
    for (var i = 0; i < data.length; i++) {
        var geoCoord = geoCoordMap[data[i].name];
        if (geoCoord) {
            res.push({
                name: data[i].name,
                value: geoCoord.concat(data[i].value)
            });
        }
    }
    return res;
};

option9 = {
    
    title: {
        text: ' ',
        sublink: ' ',
        x:'center',
        textStyle: {
            color: '#fff'
        }
    },
    tooltip: {
        trigger: 'item',
        formatter: function (params) {
            return params.name + ' : ' + params.value[2];
        }
    },
    legend: {
        orient: 'vertical',
        y: 'bottom',
        x:'right',
        data:['pm2.5'],
        textStyle: {
            color: '#fff'
        }
    },
    visualMap: {
        min: 0,
        max: 200,
        calculable: true,
        color: ['#d94e5d','#eac736','#50a3ba'],
        textStyle: {
            color: '#fff'
        }
    },
    geo: {
        map: 'shanghai',
        label: {
            emphasis: {
                show: false
            }
        },
        itemStyle: {
            normal: {
                areaColor: 'rgba(127,199,221,0.1)',
                borderColor: '#0177ff'
            },
            emphasis: {
                areaColor: '#071537'//鼠标指上市时的颜色
            }
        }
    },
    series: [
        {
            name: ' ',
            type: 'scatter',
            coordinateSystem: 'geo',
            data: convertData([
               
            ]),
            symbolSize: 12,
            label: {
                normal: {
                    show: false
                },
                emphasis: {
                    show: false
                }
            },
            itemStyle: {
                emphasis: {
                    borderColor: '#fff',
                    borderWidth: 1
                }
            }
        }
    ]
}